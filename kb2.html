<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body bgcolor="black">
        <button onclick="DeviceMotionEvent.requestPermission()">gyro</button>
        <pre id="output" style="color: hsla(120, 100%, 25%, 1)"></pre>
      
        <script>

            var prevX = 0
            var prevY = 0

            setInterval(() => {
                //energy = 0
            }, 100)

            onmousemove = (event) => {
                ev = {}
                ev.acceleration = {}
                const x = event.clientX / 1000
                const y = event.clientY / 1000
                ev.acceleration.x = event.clientX - prevX
                ev.acceleration.y = event.clientY - prevY
                ev.acceleration.z = 0
                prevX = x
                prevY = y
                ondevicemotion(ev)
            }

            var prev = [0,0,0]
            var energy = 0.001
            
            var energyThreshold = 0.05
            var minEnergy = 0.0
            var energyScale = 1.0
            
            ondevicemotion = (event) => {
            
                var [x, y, z] = [event.acceleration.x, event.acceleration.y, event.acceleration.z]
                var [dx, dy, dz] = [x - prev[0], y - prev[1], z - prev[2]]
                prev = [x, y, z]
                var [x, y, z] = [dx, dy, dz]
                energy = energyScale * (dx * dx + dy * dy + dz * dz)
                if (energy > energyThreshold) {
                    energy = energyThreshold
                }
                
            
            }
            setInterval(() => {
                energy = 0
            }, 300)
        </script>
        <script>
            const maxy = 755
            var rate = 0
            var cursor = 0

            var y = maxy
            var console = []

            const set = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]
            var candidate = ""
            var out = ""

            setInterval(() => {     
                const gravity = (6 + 5 * y) 
                const shift = (y - (energy * energy * 15000))
                y1 = Math.max(0, Math.min(screenHeight, (shift + gravity)))
                if (y1 < y) {
                    y = y1 
                } else {
                    y = y1 + gravity * (0.3 * 1000 / shift)
                }
                rate = y / maxy
            }, 10)

            setInterval(() => {
                cursor += 1 / rate
                cursor %= set.length
                candidate = set[cursor]
                if (rate < 2) {
                    console.push(candidate)
                }
                out = 
            }, 10)

        </script>