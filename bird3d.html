<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - postprocessing - unreal bloom</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<style>
		#info > * {
			max-width: 650px;
			margin-left: auto;
			margin-right: auto;
		}
		</style>
	</head>
	<body bgcolor="black">

        <script type="importmap">
	{
		"imports": {
			"three": "https://cdn.jsdelivr.net/npm/three/build/three.module.js"
		}
	}
</script>



</script>
		<script type="module">
            import * as THREE from 'three';

             import { EffectComposer } from 'https://threejs.org/examples/jsm/postprocessing/EffectComposer.js';
            import { RenderPass } from 'https://threejs.org/examples/jsm/postprocessing/RenderPass.js';
            import { UnrealBloomPass } from 'https://threejs.org/examples/jsm/postprocessing/UnrealBloomPass.js';
import { Water } from 'https://threejs.org/examples/jsm/objects/Water.js';

const width = window.innerWidth - 100, height = window.innerHeight - 100;

// init

// https://github.com/josephg/noisejs Perlin Noise

const camera = new THREE.PerspectiveCamera( 70, width / height, 0.01, 10 );
camera.position.z = 1;

const scene = new THREE.Scene();

const geometry = new THREE.SphereGeometry( 0.1, 36, 36 );
const material = new THREE.MeshBasicMaterial( { color: 'cyan'} )


const mesh = new THREE.Mesh( geometry, material );
scene.add( mesh );

const renderer = new THREE.WebGLRenderer( { antialias: true } );
renderer.setSize( width, height );
renderer.setAnimationLoop( animate );
document.body.appendChild( renderer.domElement );


    const renderScene = new RenderPass( scene, camera );

      const params = {
        exposure: 1,
        bloomStrength: 3,
        bloomThreshold: 0,
        bloomRadius: 0
    };

    const bloomPass = new UnrealBloomPass( new THREE.Vector2( window.innerWidth, window.innerHeight ), 1.5, 0.4, 0.85 );
    bloomPass.threshold = params.bloomThreshold;
    bloomPass.strength = params.bloomStrength;
    bloomPass.radius = params.bloomRadius;

    const composer = new EffectComposer( renderer );
    composer.addPass( renderScene );
    composer.addPass( bloomPass );

// animation

function animate( time ) {

	mesh.position.x = ((time / 3 % 100) / 2000);
	mesh.rotation.y = time / 1000;



	composer.render();

}
        </script>

	</body>

</html>